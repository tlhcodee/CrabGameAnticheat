using CAC.checks.events.impl;
using CAC.data.trackers;
using System;
using System.Collections.Generic;
using System.Text;

namespace CAC.checks.impl.exploit.fakelag
{
    public class FakeLagA() : Check("FakeLag", CheckLevel.A, "Checks for fake lagging", 5, 5)
    {
        public override void handleMovementUpdate(EventMovement e)
        {
            PositionTracker positionTracker = this.player.positionTracker;
            ConnectionTracker connectionTracker = this.player.connectionTracker;

            long difference = (long) (connectionTracker.lastDelay - DateTime.Now).TotalMilliseconds;

            if(difference > 500) // WHERE IS THE PING PONG RESPONSE LIL BRO?
            {
                if(this.Buffer.increase() > 5)
                {
                    this.fail();
                }
            } else
            {
                this.Buffer.decrease();
            }

            base.handleMovementUpdate(e);
        }
    }
}
